# 代码随想录算法训练营74期|数组Part02 滑动窗口、螺旋数组、前缀和

| 题目     | Leetcode地址 |
| ----------- | ----------- |
| 209.长度最小的子数组      | [力扣题目链接](https://leetcode.cn/problems/minimum-size-subarray-sum/)      |
| 904. 水果成篮   | [力扣题目链接](https://leetcode.cn/problems/fruit-into-baskets/)        |
|76. 最小覆盖子串|[力扣题目链接](https://leetcode.cn/problems/minimum-window-substring/)
| 59.螺旋矩阵II      | [力扣题目链接](https://leetcode.cn/problems/spiral-matrix-ii/)      |
| 54. 螺旋矩阵   | [力扣题目链接](https://leetcode.cn/problems/spiral-matrix/)        |
|剑指offer29.顺时针打印数组|[力扣题目链接](https://leetcode.cn/problems/shun-shi-zhen-da-yin-ju-zhen-lcof/)|
|卡玛网58.区间和（前缀和）|[题目链接](https://kamacoder.com/problempage.php?pid=1070)|
|卡玛网44.开发商购买土地|[题目链接](https://kamacoder.com/problempage.php?pid=1044)

对于一些连续的子数组中的问题，我们就可以考虑使用滑动窗口来处理。
所谓滑动窗口，就是**不断的调节子序列的起始位置和终止位置，从而得出我们要想的结果。**
## 滑动窗口的关键
1. 窗口内是什么？：窗口内其实就是满足条件的连续数组
2. 如何移动窗口的起始位置？：当当前窗口内**不满足条件**时，我们就要向前移动窗口，知道满足条件为止。
3. 如何移动窗口的结束位置？：窗口的结束位置就是遍历数组的指针，也就是for循环里的索引。
滑动窗口的精妙之处在于根据当前子序列和大小的情况，不断调节子序列的起始位置。从而将O(n^2)暴力解法降为O(n)。
**注意，一般来说，移动窗口的开始位置就是当条件不满足或者满足了，我们要去寻找目前满足条件的临界位置。在移动过程中，不断更新要求的最长或者最短子序列的位置。所以，滑动窗口，我们可以看成，每次以right指针为结尾的最短子序列的长度。分别求出来后，最短或者最长的即为答案。
## 拿第209题来说：
每次向右取一个元素，如果当前窗口的和大于target，则缩小窗口，缩小窗口的方式就是将left指针向右移动一位。在缩小的时候开始记录最短的子序列的长度。知道小于target。我们再移动right指针，寻找下一个满足条件的位置。
## 滑动窗口一般判断条件结合哈希表，就会比较复杂，对于这种题，只需要找好判断条件，用好哈希表，就会比较简单。
## 拿第904题来说：
这道题的判断条件是：**当前窗口内的水果种类小于等于2**。
我们可以使用哈希表来记录当前窗口内的水果种类，key是水果的种类，value是水果的数量。当水果的种类大于2时，我们就需要缩小窗口，缩小窗口的方式就是将left指针向右移动一位。直到map.size()<=2为止。那么这个时候应该是以right结尾的最长子序列。一般来说，移动left就象征着更新。具体看题目的要求
## 拿第76题来说：
这道题的判断条件是：**当前窗口内的字符包含t中所有的字符**。
我们可以使用哈希表来记录当前窗口内的字符，key是字符，value是字符的数量。当窗口内的字符包含t中所有的字符时，我们就需要缩小窗口，缩小窗口的方式就是将left指针向右移动一位。直到窗口内的字符包含t中所有的字符为止。那么这个时候应该是以right结尾的最短子序列。

# 螺旋数组和螺旋矩阵总结
本题并不涉及到什么算法，就是模拟过程，但却十分考察对代码的掌控能力。其实关键就是要找到每一次循环，并且就像二分法中所说的找到**循环不变量**，因为可以发现这个循环的判断条件非常多且复杂，所以要坚持循环不变量原则，找到每次循环的共同点，这样就可以很容易的写出来代码了。左开右闭或者左闭右开。
正方形的数组循环次数很好找到。
如果是长方形的矩阵，找循环次数和边界条件就比较困难了。可以发现，循环次数往往取决于短边的长度， 循环次数就是短边的长度//2。剩下的就是看短边是否为奇数，可以发现，如果是奇数，会剩下一条（一行或者一列）的数据没有遍历，这个时候再额外加一遍循环即可。
## 总结
在面对这种问题，关键在于找到一下三个关键点：
1. 循环不变量
2. 循环次数和边界条件
3. 通用循环后的特殊处理
# 前缀和总结
前缀和的思想是重复利用计算过的子数组之和，从而降低区间查询需要累加计算的次数。
**前缀和 在涉及计算区间和的问题时非常有用**
**特别注意： 在使用前缀和求解的时候，要特别注意 求解区间。**

如区间和这道题，如果我们要求 区间下标 [2, 5] 的区间和，那么应该是 p[5] - p[1]，而不是 p[5] - p[2]。

在使用前缀和的时候，如果分不清前缀和的区间，建议画一画图，模拟一下 思路会更清晰。前缀和一般会将时间复杂度降低一个指数级。那开发商土地这一题来说：
看到本题，大家如果想暴力求解，应该是 n^3 的时间复杂度，
一个 for 枚举分割线， 嵌套 两个for 去累加区间里的和。
如果本题要求 任何两个行（或者列）之间的数值总和，大家在0058.区间和 的基础上 应该知道怎么求。
就是前缀和的思路，先统计好，前n行的和 q[n]，如果要求矩阵 a行 到 b行 之间的总和，那么就 q[b] - q[a - 1]就好。
本题也可以使用 前缀和的思路来求解，先将 行方向，和 列方向的和求出来，这样可以方便知道 划分的两个区间的和。
# **数组总结**
数组是最基本的数据结构，在内存中是连续内存空间上的相同类型的数据的集合。所以增加和删除的操作比较复杂，需要移动其他元素。
## 经典题目：
1.二分法：**循环不变量**
2.双指针：快慢指针或者前后指针
3.滑动窗口：滑动窗口的精妙之处在于根据当前子序列和大小的情况，不断调节子序列的起始位置。从而将O(n^2)的暴力解法降为O(n)。特别是某些连续子序列的属性，一般会用到。
4. 模拟：螺旋数组等，循环不变量，边界条件。要始终不变
5. 前缀和：前缀和一般会将时间复杂度降低一个指数级。